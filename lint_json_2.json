[{"filePath":"C:\\Users\\vedan\\Downloads\\iot deployed v1\\iot-website\\src\\components\\BirthdaySurprise.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\vedan\\Downloads\\iot deployed v1\\iot-website\\src\\components\\BirthdaySurprise.tsx:29:13\n  27 |     useEffect(() => {\n  28 |         if (isOpen) {\n> 29 |             setStage('cake');\n     |             ^^^^^^^^ Avoid calling setState() directly within an effect\n  30 |             setCandlesBlown(false);\n  31 |         }\n  32 |     }, [isOpen]);","line":29,"column":13,"nodeType":null,"endLine":29,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport Image from 'next/image';\r\nimport { X, Trophy, Star, Heart, Cpu, CircuitBoard } from 'lucide-react';\r\n\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport confetti from 'canvas-confetti';\r\n\r\ninterface BirthdaySurpriseProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function BirthdaySurprise({ isOpen, onClose }: BirthdaySurpriseProps) {\r\n    const [mounted, setMounted] = useState(false);\r\n    const [stage, setStage] = useState<'cake' | 'reveal'>('cake');\r\n    const [candlesBlown, setCandlesBlown] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => setMounted(true), 0);\r\n        return () => clearTimeout(timer);\r\n    }, []);\r\n\r\n    // Reset stage when opened\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setStage('cake');\r\n            setCandlesBlown(false);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    const handleBlowCandles = () => {\r\n        setCandlesBlown(true);\r\n        // Trigger initial confetti\r\n        confetti({\r\n            particleCount: 100,\r\n            spread: 70,\r\n            origin: { y: 0.6 }\r\n        });\r\n\r\n        // Transition to reveal after a short delay\r\n        setTimeout(() => {\r\n            setStage('reveal');\r\n            triggerBigConfetti();\r\n        }, 1500);\r\n    };\r\n\r\n    const triggerBigConfetti = () => {\r\n        const duration = 5000;\r\n        const animationEnd = Date.now() + duration;\r\n        const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };\r\n        const randomInRange = (min: number, max: number) => Math.random() * (max - min) + min;\r\n\r\n        const interval = setInterval(() => {\r\n            const timeLeft = animationEnd - Date.now();\r\n\r\n            if (timeLeft <= 0) {\r\n                clearInterval(interval);\r\n                return;\r\n            }\r\n\r\n            const particleCount = 50 * (timeLeft / duration);\r\n\r\n            confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } });\r\n            confetti({ ...defaults, particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } });\r\n        }, 250);\r\n    };\r\n\r\n    if (!mounted) return null;\r\n\r\n    return (\r\n        <AnimatePresence>\r\n            {isOpen && (\r\n                <motion.div\r\n                    initial={{ opacity: 0 }}\r\n                    animate={{ opacity: 1 }}\r\n                    exit={{ opacity: 0 }}\r\n                    className=\"fixed inset-0 z-[200] flex items-center justify-center bg-black/95 backdrop-blur-xl p-4 md:p-8\"\r\n                >\r\n                    {/* Background Glows */}\r\n                    <div className=\"absolute top-1/4 left-1/4 w-64 h-64 bg-purple-600/20 blur-[120px] rounded-full animate-pulse\" />\r\n                    <div className=\"absolute bottom-1/4 right-1/4 w-64 h-64 bg-blue-600/20 blur-[120px] rounded-full animate-pulse delay-700\" />\r\n\r\n                    <div className=\"relative w-full max-w-4xl flex flex-col items-center justify-center\">\r\n                        {/* Close Button */}\r\n                        <button\r\n                            onClick={onClose}\r\n                            className=\"absolute -top-12 right-0 p-2 rounded-full bg-white/10 hover:bg-white/20 border border-white/10 text-white transition-all z-50\"\r\n                        >\r\n                            <X className=\"w-6 h-6\" />\r\n                        </button>\r\n\r\n                        <AnimatePresence mode=\"wait\">\r\n                            {stage === 'cake' ? (\r\n                                <motion.div\r\n                                    key=\"cake\"\r\n                                    initial={{ scale: 0.8, opacity: 0 }}\r\n                                    animate={{ scale: 1, opacity: 1 }}\r\n                                    exit={{ scale: 1.5, opacity: 0 }}\r\n                                    className=\"text-center cursor-pointer\"\r\n                                    onClick={handleBlowCandles}\r\n                                >\r\n                                    <div className=\"text-9xl mb-8 transform hover:scale-110 transition-transform duration-300\">\r\n                                        ≡ƒÄé\r\n                                    </div>\r\n                                    <h2 className=\"text-3xl font-bold text-white mb-4\">Make a Wish!</h2>\r\n                                    <p className=\"text-gray-400 animate-pulse\">Click the cake to blow the candles</p>\r\n\r\n                                    {candlesBlown && (\r\n                                        <motion.div\r\n                                            initial={{ opacity: 0 }}\r\n                                            animate={{ opacity: 1 }}\r\n                                            className=\"mt-4 text-yellow-400 font-bold text-xl\"\r\n                                        >\r\n                                            WISH GRANTED!\r\n                                        </motion.div>\r\n                                    )}\r\n                                </motion.div>\r\n                            ) : (\r\n                                <motion.div\r\n                                    key=\"reveal\"\r\n                                    initial={{ scale: 0.8, y: 50, opacity: 0 }}\r\n                                    animate={{ scale: 1, y: 0, opacity: 1 }}\r\n                                    className=\"w-full bg-gradient-to-b from-white/10 to-transparent border border-white/20 rounded-3xl overflow-hidden shadow-2xl\"\r\n                                >\r\n                                    <div className=\"flex flex-col md:flex-row items-center gap-8 md:gap-12 p-8 md:p-12\">\r\n                                        {/* Photo Container */}\r\n                                        <motion.div\r\n                                            initial={{ x: -50, opacity: 0 }}\r\n                                            animate={{ x: 0, opacity: 1 }}\r\n                                            transition={{ delay: 0.2 }}\r\n                                            className=\"relative group\"\r\n                                        >\r\n                                            <div className=\"absolute -inset-1 bg-gradient-to-r from-yellow-400 via-red-500 to-purple-600 rounded-2xl blur opacity-75 group-hover:opacity-100 transition duration-1000 group-hover:duration-200 animate-tilt\"></div>\r\n                                            <div className=\"relative w-64 h-64 md:w-80 md:h-80 rounded-2xl overflow-hidden border-2 border-white/20\">\r\n                                                <Image\r\n                                                    src=\"/images/Rudrakshi Rai.JPG\"\r\n                                                    alt=\"President Rudrakshi Rai\"\r\n                                                    fill\r\n                                                    className=\"object-cover\"\r\n                                                    priority\r\n                                                />\r\n                                            </div>\r\n                                            <motion.div\r\n                                                animate={{ rotate: [0, 10, -10, 0], scale: [1, 1.1, 1.1, 1] }}\r\n                                                transition={{ repeat: Infinity, duration: 4 }}\r\n                                                className=\"absolute -top-4 -right-4 bg-yellow-400 p-3 rounded-full shadow-lg z-10\"\r\n                                            >\r\n                                                <Trophy className=\"w-6 h-6 text-black\" />\r\n                                            </motion.div>\r\n\r\n                                            {/* Floating IoT Icons */}\r\n                                            <motion.div\r\n                                                animate={{ y: [0, -20, 0], rotate: 360 }}\r\n                                                transition={{ repeat: Infinity, duration: 5, ease: \"linear\" }}\r\n                                                className=\"absolute -bottom-6 -left-6 text-blue-400 opacity-50\"\r\n                                            >\r\n                                                <Cpu className=\"w-12 h-12\" />\r\n                                            </motion.div>\r\n                                            <motion.div\r\n                                                animate={{ y: [0, 20, 0], rotate: -360 }}\r\n                                                transition={{ repeat: Infinity, duration: 7, ease: \"linear\" }}\r\n                                                className=\"absolute top-1/2 -right-12 text-purple-400 opacity-50\"\r\n                                            >\r\n                                                <CircuitBoard className=\"w-10 h-10\" />\r\n                                            </motion.div>\r\n                                        </motion.div>\r\n\r\n                                        {/* Content */}\r\n                                        <div className=\"flex-1 text-center md:text-left space-y-6\">\r\n                                            <motion.div\r\n                                                initial={{ y: 20, opacity: 0 }}\r\n                                                animate={{ y: 0, opacity: 1 }}\r\n                                                transition={{ delay: 0.4 }}\r\n                                            >\r\n                                                <h2 className=\"text-yellow-400 font-bold tracking-widest text-sm md:text-base uppercase mb-2\">HAPPY BIRTHDAY</h2>\r\n                                                <h1 className=\"text-4xl md:text-6xl font-black text-white leading-tight\">\r\n                                                    President <br />\r\n                                                    <span className=\"bg-clip-text text-transparent bg-gradient-to-r from-yellow-200 via-white to-yellow-200 animate-gradient\">\r\n                                                        Rudrakshi Rai\r\n                                                    </span>\r\n                                                </h1>\r\n                                            </motion.div>\r\n\r\n                                            <motion.p\r\n                                                initial={{ y: 20, opacity: 0 }}\r\n                                                animate={{ y: 0, opacity: 1 }}\r\n                                                transition={{ delay: 0.6 }}\r\n                                                className=\"text-gray-300 text-lg md:text-xl font-medium\"\r\n                                            >\r\n                                                The &ldquo;Best&rdquo; Leader &amp; Visionary of Bennett University&apos;s IoT Club.\r\n                                                Thank you for your incredible contribution!\r\n                                                <br />\r\n                                                <span className=\"text-sm text-gray-400 mt-2 block\">(Scroll down for cake cutting moments)</span>\r\n                                            </motion.p>\r\n\r\n                                            <motion.div\r\n                                                initial={{ y: 20, opacity: 0 }}\r\n                                                animate={{ y: 0, opacity: 1 }}\r\n                                                transition={{ delay: 0.8 }}\r\n                                                className=\"flex flex-wrap justify-center md:justify-start gap-4\"\r\n                                            >\r\n                                                <div className=\"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 text-white text-sm\">\r\n                                                    <Star className=\"w-4 h-4 text-yellow-400 fill-yellow-400\" />\r\n                                                    <span>Exemplary Leadership</span>\r\n                                                </div>\r\n                                                <div className=\"flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 text-white text-sm\">\r\n                                                    <Heart className=\"w-4 h-4 text-red-500 fill-red-500\" />\r\n                                                    <span>Club Hero</span>\r\n                                                </div>\r\n                                            </motion.div>\r\n\r\n                                            <motion.div\r\n                                                initial={{ scale: 0.9, opacity: 0 }}\r\n                                                animate={{ scale: 1, opacity: 1 }}\r\n                                                transition={{ delay: 1 }}\r\n                                                className=\"pt-4\"\r\n                                            >\r\n                                                <div className=\"bg-yellow-400/10 border border-yellow-400/20 p-4 rounded-xl\">\r\n                                                    <p className=\"text-yellow-400 font-mono text-sm italic\">\r\n                                                        &ldquo;Leadership is the capacity to translate vision into reality.&rdquo;\r\n                                                    </p>\r\n                                                </div>\r\n                                            </motion.div>\r\n                                        </div>\r\n                                    </div>\r\n                                </motion.div>\r\n                            )}\r\n                        </AnimatePresence>\r\n                    </div>\r\n                </motion.div>\r\n            )}\r\n        </AnimatePresence>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]}]
